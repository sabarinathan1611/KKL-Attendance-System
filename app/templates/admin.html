{% extends "base_admin.html" %} {% block title %} Employee {% endblock %} {%
block content %}

<link rel="stylesheet" href="static/css/attendance.css" />

<menu class="table-menu" style="display: flex">
  <ul class="btn-container">
    <li class="tag-btn click active today-attend-btn" index="0">Today Attendance</li>
    <li class="tag-btn click month-attend-btn"  index="1">This Month Attendance</li>
    <select name="shift" id="shift" class="tag-btn click shift_change" index="0">
      <option value="" disabled>Select Shift Name</option>
      <option value="8A">A ~ Shift</option>
      <option value="8B">B ~ Shift</option>
      <option value="8C">C ~ Shift</option>
    </select>
  </ul>
</menu>

<section class="frame today-attendance" style="display: flex" index="0">
  <div class="inner-frame">
    <div class="frame-header">
      <div class="frame-details currentShift">
        <p class="shift name"><span class="tag">A</span> ~ shift</p>
        <p class="frame-name">Attendance</p>
      </div>
      <div class="frame-options">
        <button type="button" class="download">
          <i class="fas fa-file-excel"></i>
        </button>
      </div>
    </div>
    <div class="frame-body">
      <table class="today-attendance-table">
        <thead>
          <tr class="tablehead">
            <th>EmpId</th>
            <th>Name</th>
            <th>Date</th>
            <th>Shift</th>
            <th>Shift Intime</th>
            <th>Shift Outtime</th>
            <th>Intime</th>
            <th>Outtime</th>
            <th>Late By</th>
            <th>Early Go</th>
            <th>Total Duration</th>
            <th>Extra Time</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody class="tableBody">
          {% if attendance %} {% for attendance in attendance %}
          <tr data-shift="{{attendance.shiftType}}">
            <td class="id">{{attendance.emp_id }}</td>
            <td class="name">{{attendance.name}}</td>
            <td>{{attendance.date.date()}}</td>
            <td class="shift">{{attendance.shiftType}}</td>
            <td>{{attendance.shiftIntime}}</td>
            <td>{{attendance.shift_Outtime}}</td>
            <td class="intime">{{attendance.inTime}}</td>
            <td class="outtime">{{attendance.outTime}}</td>
            <td>{{attendance.lateBy}}</td>
            <td>{{attendance.earlyGoingBy}}</td>
            <td>{{attendance.TotalDuration}}</td>
            <td class="extra">{{attendance.overtime}}</td>
            <td class="status">
              {% if attendance.attendance == "Present"%}<i
                class="fas fa-check-circle"
              ></i
              >Present {% elif attendance.attendance == "O.T"%}<i
                class="fas fa-check-circle"
              ></i
              >OT {% elif attendance.attendance == "Wrong Shift"%}<i
                class="fas fa-times-circle"
              ></i
              >Wrong Shift {% else %}<i class="fas fa-times-circle"></i>
              Absent{% endif %}
            </td>
            <td class="action">
              <p class="tag">N/A</p>
            </td>
          </tr>
          {% endfor %} {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</section>

<section class="frame month-attendance" style="display: none" index="1">
  <div class="inner-frame">
    <div class="frame-header">
      <div class="frame-details">
        <p class="frame-name">Month Attendance</p>
        <!-- <p class="shift name"><span class="tag">A</span> ~ shift</p> -->
      </div>
      <!-- <div class="frame-search">
        <input
          type="text"
          name="idsearch"
          id="idsearch"
          placeholder="Search By ID"
        />
        <input
          type="text"
          name="namesearch"
          id="namesearch"
          placeholder="Search By Name"
        />
      </div> -->
      <div class="frame-options">
        <button type="button" class="download">
          <i class="fas fa-file-excel"></i>
        </button>
      </div>
    </div>
    <div class="frame-body">
      {% if employee_data %}
      <table class="attendance-table">
        <thead>
          <tr class="thead">
            <th>EmpId</th>
            {% for date in date %}
            <th>{{ date }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody class="tableBody filter">
          {% for emp_id, records in employee_data.items() %}
          <tr>
            <td>{{ emp_id }}</td>
            {% for record in records %} {% if record.attendance =='Present' %}
            <td>
              <p style="display: none">Present</p>
              <i class="fas fa-check-circle"></i>
            </td>
            {% elif record.attendance =='O.T' %}
            <td>
              <p style="display: none">Over Time</p>
              <i class="fas fa-clock" style="color: blue"></i>
            </td>
            {% elif record.attendance =='Week Off' %}
            <td>
              <p style="display: none">Week Off</p>
              W
            </td>
            {% else %}
            <td>
              <p style="display: none">Absent</p>
              <i class="fas fa-times-circle"></i>
            </td>
            {% endif %} {% endfor %}
          </tr>

          {% endfor %} {% else %}

          <p class="mt-3">No attendance records found for last month.</p>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</section>


{% endblock %} {% block scripts %}
<script src="static/js/script.js"></script>
<script src="/static/js/filter.js"></script>
<script src="/static/js/action.js"></script>


{% endblock %}
